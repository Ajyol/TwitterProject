<%- include('header-footer/header') %>

<h2>Messages for Topic: <%= topic.title %></h2>

<form action="/topics/<%= topic._id %>/messages" method="POST">
  <textarea name="content" rows="3" cols="50" placeholder="Write your message here..." required></textarea>
  <br>
  <button type="submit">Post Message</button>
</form>

<hr>

<% if (messages.length === 0) { %>
  <p>No messages yet.</p>
<% } else { %>
  <ul>
    <% messages.forEach(message => { %>
      <li>
        <p><strong><%= message.author.username %>:</strong> <%= message.content %></p>
        <p><em>Posted on: <%= message.postedDate.toDateString() %></em></p>
      </li>
    <% }) %>
  </ul>
<% } %>

<a href="/dashboard">Back to dashboard</a>
<%- include('header-footer/footer') %>
